<div class="posts-grid">
  <% page.posts.forEach(function(post){ %>
    <md-elevated-card class="post-card-enhanced">

      <% if (post.cover || (post.photos && post.photos.length)) { %>
        <img class="card-cover" src="<%- url_for(post.cover || post.photos[0]) %>" alt="<%= post.title %> cover">
      <% } %>
      
      <div class="card-content">
        <h2 class="card-title-enhanced">
          <a href="<%- url_for(post.path) %>"><%= post.title %></a>
        </h2>

        <time datetime="<%= date_xml(post.date) %>" class="card-meta">
          <%= date(post.date, 'YYYY-MM-DD') %>
        </time>

        <div class="post-excerpt">
          <% if (post.excerpt && post.excerpt.length > 0) { %>
            <%- post.excerpt %>
          <% } else if (post.content) { %>
            <%- strip_html(post.content).substring(0, 150) + '...' %>
          <% } %>
        </div>

        <% if (post.tags && post.tags.length > 0) { %>
          <div class="tags-container">
            <% post.tags.each(function(tag) { %>
              <a href="<%- url_for(tag.path) %>" class="tag-chip">
                #<%= tag.name %>
              </a>
            <% }); %>
          </div>
        <% } %>
      </div>
    </md-elevated-card>
  <% }); %>
</div>

<%# Pagination %>
<% if (page.total > 1) { %>
  <div class="pagination">
    <%- paginator({
      prev_text: '<md-icon>chevron_left</md-icon> Previous',
      next_text: 'Next <md-icon>chevron_right</md-icon>',
      escape: false
    }) %>
  </div>
<% } %>